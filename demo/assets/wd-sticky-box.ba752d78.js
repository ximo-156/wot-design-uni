import{d as e,r as t,N as s,v as o,h as a,j as l,o as i,c as u,w as n,a as d,n as v,x as r,u as c,z as p,i as f,y as h,a4 as b,S as y,Q as w}from"./index-3f88d4b2.js";import{_ as x}from"./wd-resize.e3c31430.js";import{g,i as m,j as $,y as _,v as k,k as z,b as C}from"./page-wraper.84820f31.js";const I=C(e({name:"wd-sticky",options:{addGlobalClass:!0,styleIsolation:"shared"},props:{...g,zIndex:m(1),offsetTop:m(0)},setup(e,{expose:y}){const w=e,g=t(`wd-sticky${$()}`),m=t(!1),C=t("absolute"),I=t(0),T=t(0),R=t(0),j=t([]),P=t(""),M=s("box-height",null)||t(0),N=s("observerForChild",null),{proxy:S}=h(),B=h(),F=o((()=>{const e={"z-index":w.zIndex,height:_(T.value),width:_(R.value)};return m.value||(e.position="relative"),`${k(e)};${w.customStyle}`})),G=o((()=>{const e={"z-index":w.zIndex,height:_(T.value),width:_(R.value)};return m.value||(e.position="relative"),`${k(e)};`})),V=o((()=>{const e={position:C.value,top:_(I.value)};return k(e)})),E=o((()=>{let e=0;return e=44,44+w.offsetTop}));function Q(e){R.value=e.width,T.value=e.height,function(){if(0===T.value&&0===R.value)return;const e=E.value+T.value;(function(){for(;0!==j.value.length;)j.value.pop().disconnect()})(),function(){const e=b(B);return j.value.push(e),e}().relativeToViewport({top:-e}).observe(`#${g.value}`,q),z(`#${g.value}`,!1,S).then((t=>{Number(t.bottom)<=e&&q({boundingClientRect:t})}))}(),N&&N(S)}function q({boundingClientRect:e}){if(N&&T.value>=M.value)return C.value="absolute",void(I.value=0);e.top<=E.value?(P.value="sticky",m.value=!1,C.value="fixed",I.value=E.value):e.top>E.value&&(P.value="normal",m.value=!1,C.value="absolute",I.value=0)}return y({setPosition:function(e,t,s){m.value=e,C.value=t,I.value=s},openBox:m,position:C,top:I,height:T,width:R,state:P,offsetTop:E.value}),(e,t)=>{const s=a(l("wd-resize"),x),o=f;return i(),u(o,{style:r(`${c(F)};display: inline-block;`)},{default:n((()=>[d(o,{class:v(`wd-sticky ${w.customClass}`),style:r(c(G)),id:g.value},{default:n((()=>[d(o,{class:"wd-sticky__container",style:r(c(V))},{default:n((()=>[d(s,{onResize:Q,"custom-style":"display: inline-block;"},{default:n((()=>[p(e.$slots,"default",{},void 0,!0)])),_:3})])),_:3},8,["style"])])),_:3},8,["class","style","id"])])),_:3},8,["style"])}}}),[["__scopeId","data-v-ada2d333"]]),T=C(e({name:"wd-sticky-box",options:{addGlobalClass:!0,styleIsolation:"shared"},props:g,setup(e){const s=e,o=t(`wd-sticky-box${$()}`),c=t(new Map),g=t(0),m=t(0),_=[],{proxy:k}=h(),C=h();function I(e){m.value=e.width,g.value=e.height;const t=c.value;c.value=new Map;for(const[s]of t){T(_.find((e=>e.$.uid===s)))}t.forEach((e=>{e.disconnect()})),t.clear()}function T(e){_.find((t=>t.$.uid===e.$.uid))||_.push(e),function(e){const t=c.value.get(e.$.uid);t&&(t.disconnect(),c.value.delete(e.$.uid))}(e);const t=function(e){const t=b(C);return c.value.set(e.$.uid,t),t}(e),s=e.$.exposed,a=s.height.value+s.offsetTop;g.value<=s.height.value&&s.setPosition(!1,"absolute",0),t.relativeToViewport({top:-a}).observe(`#${o.value}`,(e=>{R(s,e)})),z(`#${o.value}`,!1,k).then((e=>{Number(e.bottom)<=a&&R(s,{boundingClientRect:e})})).catch((e=>{console.log(e)}))}function R(e,{boundingClientRect:t}){const s=e.height.value+e.offsetTop;if(t.bottom<=s)e.setPosition(!0,"absolute",t.height-e.height.value);else if(t.top<=s&&t.bottom>s){if("normal"===e.state.value)return;e.setPosition(!1,"fixed",e.offsetTop)}}return y("box-height",g),y("box-width",m),y("observerForChild",T),w((()=>{c.value=new Map})),(e,t)=>{const o=a(l("wd-resize"),x),c=f;return i(),u(c,{style:{position:"relative"}},{default:n((()=>[d(c,{class:v(`wd-sticky-box ${s.customClass}`),style:r(e.customStyle),id:"styckyBoxId"},{default:n((()=>[d(o,{onResize:I},{default:n((()=>[p(e.$slots,"default",{},void 0,!0)])),_:3})])),_:3},8,["class","style"])])),_:3})}}}),[["__scopeId","data-v-6da8bb15"]]);export{I as _,T as a};
