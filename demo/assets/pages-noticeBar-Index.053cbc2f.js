import{g as e,m as t,h as a,i as l,o,v as n,c as s,l as i,k as r,b as c,a as u}from"./page-wraper.84820f31.js";import{d,r as p,v as f,q as x,h as v,j as w,o as b,c as y,w as h,z as _,a as m,x as g,u as k,e as $,F as C,f as j,b as z,t as S,p as D,n as I,a5 as T,i as A,y as F,a6 as P}from"./index-3f88d4b2.js";import{_ as q}from"./demo-block.5375f9a7.js";const G=c(d({name:"wd-notice-bar",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...e,text:{type:[String,Array],default:""},type:t("warning"),scrollable:a(!0),delay:l(1),speed:l(50),closable:a(!1),wrapable:a(!1),prefix:String,color:String,backgroundColor:String,direction:t("horizontal")},emits:["close","next","click"],setup(e,{emit:t}){const a=e,l=".wd-notice-bar__wrap",c=".wd-notice-bar__content",u=p(0),d=p(!0),P=p(""),q=p(0),G=f((()=>Array.isArray(a.text)?a.text:[a.text])),H=f((()=>G.value[q.value])),M=p(0),N=f((()=>"horizontal"===a.direction)),V=f((()=>"vertical"===a.direction)),X=f((()=>{const e={};return o(a.color)&&(e.color=a.color),o(a.backgroundColor)&&(e.background=a.backgroundColor),`${n(e)};${a.customStyle}`})),Y=f((()=>{const{type:e,wrapable:t,scrollable:l}=a;let o=[];return e&&o.push(`is-${e}`),N.value?!t&&!l&&o.push("wd-notice-bar--ellipse"):o.push("wd-notice-bar--ellipse"),t&&!l&&o.push("wd-notice-bar--wrap"),o.join(" ")})),{proxy:B}=F();function E(){d.value=!1,t("close")}function J({duration:e,delay:t,translate:l}){const o={transitionProperty:"all",transitionDelay:`${t}s`,transitionDuration:`${e}s`,transform:`${"vertical"===a.direction?"translateY":"translateX"}(${l}px)`,transitionTimingFunction:"linear"};return n(o)}function K(){return Promise.all([r(l,!1,B),r(c,!1,B)])}async function L(e){const t=-e/(G.value.length+1)*(q.value+1);P.value=J({duration:e/(G.value.length+1)/a.speed,delay:a.delay,translate:t})}function O(){N.value?P.value=J({duration:0,delay:0,translate:u.value+1}):++M.value>=G.value.length&&(M.value=0,P.value=J({duration:0,delay:0,translate:0}));const e=setTimeout((()=>{q.value>=G.value.length-1?q.value=0:q.value++,t("next",q.value),T((async()=>{const[e,t]=await K();t.width&&t.height&&(N.value?P.value=J({duration:(u.value+t.width)/a.speed,delay:a.delay,translate:-t.width}):L(t.height))})),clearTimeout(e)}),20)}function Q(){const e=i(a.text)?{index:q.value,text:a.text[q.value]}:{index:0,text:a.text};t("click",e)}return x([()=>a.text],(()=>{T((()=>async function(){const[e,t]=await K();if(!e.width||!t.width||!t.height)return;u.value=e.width,N.value?a.scrollable&&(P.value=J({duration:t.width/a.speed,delay:a.delay,translate:-t.width})):G.value.length>1&&L(t.height)}()))}),{deep:!0,immediate:!0}),(e,t)=>{const a=v(w("wd-icon"),s),l=A;return d.value?(b(),y(l,{key:0,class:I(`wd-notice-bar ${e.customClass} ${k(Y)}`),style:g(k(X))},{default:h((()=>[e.prefix?(b(),y(a,{key:0,"custom-class":"wd-notice-bar__prefix",size:"18px",name:e.prefix},null,8,["name"])):_(e.$slots,"prefix",{key:1},void 0,!0),m(l,{class:"wd-notice-bar__wrap"},{default:h((()=>[m(l,{class:"wd-notice-bar__content",style:g(P.value),onTransitionend:O,onClick:Q},{default:h((()=>[k(V)?(b(),$(C,{key:0},[(b(!0),$(C,null,j(k(G),(e=>(b(),y(l,{key:e},{default:h((()=>[z(S(e),1)])),_:2},1024)))),128)),k(G).length>1?(b(),y(l,{key:0},{default:h((()=>[z(S(k(G)[0]),1)])),_:1})):D("",!0)],64)):_(e.$slots,"default",{key:1},(()=>[z(S(k(H)),1)]),!0)])),_:3},8,["style"])])),_:3}),e.closable?(b(),y(a,{key:2,"custom-class":"wd-notice-bar__suffix",size:"18px",name:"close-bold",onClick:E})):_(e.$slots,"suffix",{key:3},void 0,!0)])),_:3},8,["class","style"])):D("",!0)}}}),[["__scopeId","data-v-1f083c5b"]]),H=c(d({__name:"Index",setup(e){const t=p(["欢迎使用wot design uni","该组件库基于uniapp ->Vue3, ts构建","项目地址：https://github.com/Moonofweisheng/wot-design-uni","我们的目标是打造最强uniapp组件库","诚挚邀请大家共同建设","这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息"]),a=e=>{console.log("展示下一条，index: ",e),console.log("文本是："+t.value[e])};function l(e){console.log(e)}return(e,o)=>{const n=v(w("wd-notice-bar"),G),i=v(w("demo-block"),q),r=v(w("wd-icon"),s),c=A,d=v(w("page-wraper"),u);return b(),y(d,null,{default:h((()=>[m(c,null,{default:h((()=>[m(i,{title:"基本用法"},{default:h((()=>[m(n,{text:"这是一条消息提示信息这是一条消息提示信息这是一条消息提示信息",prefix:"warn-bold"})])),_:1}),m(i,{title:"类型修改"},{default:h((()=>[m(n,{type:"danger",text:"当前网络不可用，请检查你的网络设置。当前网络不可用，请检查你的网络设置。",prefix:"wifi-error","custom-class":"space"}),m(n,{type:"info",text:"pc-win沃特已登录，可在“设备管理”中查看详情。pc-win沃特已登录，可在“设备管理”中查看详情。",prefix:"check-outline"})])),_:1}),m(i,{title:"禁止滚动"},{default:h((()=>[m(n,{scrollable:!1,text:"通知被禁或时段内消息屏蔽可能造成消…",prefix:"warn-bold"})])),_:1}),m(i,{title:"插槽"},{default:h((()=>[m(n,{scrollable:!1},{prefix:h((()=>[m(r,{"custom-class":"prefix",name:"warn-bold"},{default:h((()=>[z("占位符")])),_:1})])),suffix:h((()=>[P("div",{style:{color:"#4d80f0"}},"查看")])),default:h((()=>[z(" 通知被禁或时段内消息屏蔽可能造成消… ")])),_:1})])),_:1}),m(i,{title:"可关闭的"},{default:h((()=>[m(n,{text:"挂起后，电脑与手机均不会有新客户接入。挂起后，电脑与手机均不会有新客户接入。",closable:"",prefix:"warn-bold"})])),_:1}),m(i,{title:"多行展示"},{default:h((()=>[m(n,{text:"这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息",wrapable:"",scrollable:!1})])),_:1}),m(i,{title:"自定义颜色"},{default:h((()=>[m(n,{text:"这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息",prefix:"check-outline",color:"#34D19D","background-color":"#f0f9eb"})])),_:1}),m(i,{title:"多文本轮播"},{default:h((()=>[m(n,{onClick:l,text:t.value,prefix:"check-outline",onNext:a},null,8,["text"])])),_:1}),m(i,{title:"垂直滚动"},{default:h((()=>[m(n,{onClick:l,prefix:"warn-bold",direction:"vertical",text:t.value,delay:3,"custom-class":"space"},null,8,["text"]),m(n,{onClick:l,prefix:"warn-bold",direction:"vertical",text:"只有一条消息不会滚动",delay:3,"custom-class":"space"})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-4f53a230"]]);export{H as default};
