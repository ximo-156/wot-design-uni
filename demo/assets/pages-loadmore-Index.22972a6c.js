import{d as e,r as a,h as s,j as t,o as l,c as r,w as o,b as d,t as i,u as n,p as u,e as c,F as m,a as f,n as _,x as g,g as p,i as v,B as x,C as w,f as h,l as y}from"./index-3f88d4b2.js";import{_ as T}from"./wd-divider.a13c828d.js";import{g as k,m as j,c as b,t as C,b as I,a as S}from"./page-wraper.84820f31.js";import{u as z}from"./useTranslate.23fa9f56.js";const B=I(e({name:"wd-loadmore",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...k,state:String,loadingText:String,finishedText:String,errorText:j("加载失败，点击重试")},emits:["reload"],setup(e,{emit:x}){const w=e,{translate:h}=z("loadmore"),y=a(null);function k(){"error"===w.state&&(y.value="loading",x("reload"))}return(e,a)=>{const x=s(t("wd-divider"),T),w=p,y=s(t("wd-icon"),b),j=s(t("wd-loading"),C),I=v;return l(),r(I,{class:_(["wd-loadmore",e.customClass]),style:g(e.customStyle),onClick:k},{default:o((()=>["finished"===e.state?(l(),r(x,{key:0},{default:o((()=>[d(i(e.finishedText||n(h)("finished")),1)])),_:1})):u("",!0),"error"===e.state?(l(),c(m,{key:1},[e.errorText?(l(),c(m,{key:0},[d(i(e.errorText),1)],64)):(l(),c(m,{key:1},[f(w,{class:"wd-loadmore__text"},{default:o((()=>[d(i(n(h)("error")),1)])),_:1}),f(w,{class:"wd-loadmore__text is-light"},{default:o((()=>[d(i(n(h)("retry")),1)])),_:1}),f(y,{name:"refresh",size:"16px","custom-class":"wd-loadmore__refresh"})],64))],64)):u("",!0),"loading"===e.state?(l(),c(m,{key:2},[f(j,{size:"16px","custom-class":"wd-loadmore__loading"}),f(w,{class:"wd-loadmore__text"},{default:o((()=>[d(i(e.loadingText||n(h)("loading")),1)])),_:1})],64)):u("",!0)])),_:1},8,["class","style"])}}}),[["__scopeId","data-v-8d457c93"]]),E=I(e({__name:"Index",setup(e){const n=a("loading"),u=a(0),_=a(60);function g(){setTimeout((()=>{u.value=u.value+15,n.value="loading"}),200)}return x((()=>{45===u.value?n.value="error":u.value<_.value?g():u.value===_.value&&(n.value="finished")})),w((()=>{g()})),(e,a)=>{const _=y,p=v,x=s(t("wd-loadmore"),B),w=s(t("page-wraper"),S);return l(),r(w,null,{default:o((()=>[f(p,{class:"container"},{default:o((()=>[(l(!0),c(m,null,h(u.value,(e=>(l(),r(p,{key:e,class:"list-item"},{default:o((()=>[f(_,{src:"https://img10.360buyimg.com/jmadvertisement/jfs/t1/70325/36/14954/36690/5dcd3e3bEee5006e0/aed1ccf6d5ffc764.png"}),f(p,{class:"right"},{default:o((()=>[d("这是一条测试"+i(e+1),1)])),_:2},1024)])),_:2},1024)))),128)),f(x,{state:n.value,onReload:g},null,8,["state"])])),_:1})])),_:1})}}}),[["__scopeId","data-v-7db38e08"]]);export{E as default};
