import{d as e,r as t,v as a,q as r,h as s,j as o,o as l,c as n,w as c,a as u,n as i,x as p,u as d,b as g,t as m,p as f,i as h}from"./index-3f88d4b2.js";import{g as b,i as _,h as v,v as w,c as y,w as x,l as j,b as k,a as N}from"./page-wraper.84820f31.js";import{_ as T}from"./demo-block.5375f9a7.js";const I=k(e({name:"wd-progress",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...b,percentage:_(0),hideText:v(!1),color:{type:[String,Array,Object],default:"linear-gradient(315deg, rgba(81,124,240,1) 0%,rgba(118,158,245,1) 100%)"},duration:_(30),status:String},setup(e){const b=e,_=t(""),v=t(0),k=t(0),N=t("");let T=null;const I=a((()=>{const e={background:_.value,width:v.value+"%","transition-duration":k.value*b.duration*.001+"s"};return w(e)}));function O(e,t){if(T)return;const{duration:a}=b;k.value=Math.abs(e-v.value),setTimeout((()=>{v.value=e,_.value=t,T=setTimeout((()=>{clearTimeout(T),T=null,S()}),k.value*a)}),50)}function S(){const{percentage:e,color:t}=b;if(v.value===e||!e)return;let a=j(t)?t:[t];if(0===a.length)throw Error("The colorArray is empty");const r=a.every((e=>"string"==typeof e)),s=a.every((e=>e.hasOwnProperty("color")&&e.hasOwnProperty("percentage")));if(!r&&!s)throw Error("Color must be String or Object with color and percentage");if(s&&a.some((({percentage:e})=>Number.isNaN(parseInt(e)))))throw Error("All the percentage must can be formatted to Number");const o=parseInt(""+100/a.length),l=s?a.sort(((e,t)=>e.percentage-t.percentage)):a.map(((e,t)=>({color:e,percentage:(t+1)*o})));v.value>e?l.some((t=>{if(e<=t.percentage)return O(e,t.color),!0})):l.some(((t,a)=>{if(v.value<t.percentage&&t.percentage<=e)return O(t.percentage,t.color),!0;a===l.length-1&&O(e,t.color)}))}return r((()=>b.percentage),(e=>{(Number.isNaN(e)||e<0||e>100)&&console.error("The value of percentage must be between 0 and 100"),S()})),r((()=>b.color),(()=>{S()}),{deep:!0,immediate:!0}),r((()=>b.status),(()=>{!function(){const{status:e}=b;let t=[];e&&t.push(`is-${e}`),N.value=t.join(" ")}()}),{deep:!0,immediate:!0}),r((()=>b.duration),(e=>{x(e)}),{deep:!0,immediate:!0}),(e,t)=>{const a=h,r=s(o("wd-icon"),y);return l(),n(a,{class:i(`wd-progress ${e.customClass}`),style:p(e.customStyle)},{default:c((()=>[u(a,{class:"wd-progress__outer"},{default:c((()=>[u(a,{class:i(`wd-progress__inner ${N.value}`),style:p(d(I))},null,8,["class","style"])])),_:1}),e.hideText?e.status?(l(),n(r,{key:1,"custom-class":`wd-progress__label wd-progress__icon ${N.value}`,name:"danger"==e.status?"close-outline":"check-outline",color:"string"==typeof e.color?e.color:""},null,8,["custom-class","name","color"])):f("",!0):(l(),n(a,{key:0,class:"wd-progress__label"},{default:c((()=>[g(m(e.percentage)+"%",1)])),_:1}))])),_:1},8,["class","style"])}}}),[["__scopeId","data-v-86a9f88b"]]),O=e({__name:"Index",setup(e){const a=t([{color:"yellow",percentage:30},{color:"red",percentage:60},{color:"blue",percentage:80},{color:"black",percentage:90}]),r=t(100);return(e,t)=>{const i=s(o("wd-progress"),I),p=s(o("demo-block"),T),d=s(o("page-wraper"),N);return l(),n(d,null,{default:c((()=>[u(p,{title:"基本用法"},{default:c((()=>[u(i,{percentage:30})])),_:1}),u(p,{title:"不显示进度文字"},{default:c((()=>[u(i,{percentage:60,"hide-text":""})])),_:1}),u(p,{title:"进度条状态"},{default:c((()=>[u(i,{percentage:100,"hide-text":"",status:"success"}),u(i,{percentage:80,"hide-text":"",status:"danger"})])),_:1}),u(p,{title:"修改颜色"},{default:c((()=>[u(i,{percentage:80,color:"#00c740"})])),_:1}),u(p,{title:"颜色数组"},{default:c((()=>[u(i,{percentage:100,color:["#00c740","#ffb300","#e2231a","#0083ff"]}),u(i,{percentage:r.value,color:a.value},null,8,["percentage","color"])])),_:1})])),_:1})}}});export{O as default};
