import{g as e,A as a,G as s,i as t,h as i,z as u,m as n,c as l,O as o,P as d,o as r,b as c}from"./page-wraper.84820f31.js";import{d as p,r as m,q as b,h as v,j as f,o as h,c as w,w as _,a as N,n as x,R as y,x as M,p as I,i as g,W as V}from"./index-3f88d4b2.js";const S=c(p({name:"wd-input-number",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...e,modelValue:a(s),min:t(1),max:t(Number.MAX_SAFE_INTEGER),step:t(1),stepStrictly:i(!1),precision:t(0),disabled:i(!1),disableInput:i(!1),disableMinus:i(!1),disablePlus:i(!1),withoutInput:i(!1),inputWidth:u(36),allowNull:i(!1),placeholder:n("")},emits:["focus","blur","change","update:modelValue"],setup(e,{emit:a}){const s=e,t=m(!1),i=m(!1),u=m("");function n(e){const{disabled:a,min:u,max:n,step:l}=s;t.value=a||Number(e)<=u||C(e,-l)<u,i.value=a||Number(e)>=n||C(e,l)>n}function c(e){return Number(parseFloat(""+Math.round(e*Math.pow(10,s.precision))/Math.pow(10,s.precision)).toFixed(s.precision))}function p(e){const a=function(e){if(void 0===e)return 0;const a=e.toString(),s=a.indexOf(".");let t=0;return-1!==s&&(t=a.length-s-1),t}(s.step),t=Math.pow(10,a);return Math.round(Number(e)/s.step)*t*s.step/t}function S(e,a=!0){!s.allowNull||r(e)&&""!==e?(s.stepStrictly&&(e=p(e)),!e&&0!==e||void 0===s.precision||(e=c(Number(e))),Number(e)>s.max&&(e=c(s.max)),Number(e)<s.min&&(e=c(s.min)),A(e,a)):A(e,a)}function C(e,a){if(e=Number(e),isNaN(e))return s.min;const t=Math.pow(10,s.precision);return c((e*t+a*t)/t)}function F(){if(t.value||s.disableMinus)return;A(C(u.value,-s.step))}function k(){if(i.value||s.disablePlus)return;A(C(u.value,s.step))}function P(e){A(e.detail.value||"")}function W(e){a("focus",e.detail)}function j(){const e=E(u.value);d(u.value,e)||S(e),a("blur",{value:e})}function A(e,s=!0){d(u.value,e)||(u.value=e,s&&a("update:modelValue",u.value),s&&a("change",{value:e}))}function E(e){return!s.allowNull||r(e)&&""!==e?(e=Number(e),isNaN(e)&&(e=s.min),s.stepStrictly&&(e=p(e)),void 0!==s.precision&&(e=e.toFixed(s.precision)),Number(e)):""}return b((()=>s.modelValue),(e=>{u.value=e,n(e)}),{immediate:!0,deep:!0}),b([()=>s.max,()=>s.min],(()=>{o((()=>{const e=E(u.value);d(u.value,e)||S(e),n(e)}),30)()}),{immediate:!0,deep:!0}),b((()=>s.disabled),(e=>{t.value=e,i.value=e}),{immediate:!0,deep:!0}),(e,a)=>{const s=v(f("wd-icon"),l),n=g,o=V;return h(),w(n,{class:x(`wd-input-number ${e.customClass} ${e.disabled?"is-disabled":""} ${e.withoutInput?"is-without-input":""}`),style:M(e.customStyle)},{default:_((()=>[N(n,{class:x("wd-input-number__action "+(t.value||e.disableMinus?"is-disabled":"")),onClick:F},{default:_((()=>[N(s,{name:"decrease","custom-class":"wd-input-number__action-icon"})])),_:1},8,["class"]),e.withoutInput?I("",!0):(h(),w(n,{key:0,class:"wd-input-number__inner",onClick:a[1]||(a[1]=y((()=>{}),["stop"]))},{default:_((()=>[N(o,{class:"wd-input-number__input",style:M(""+(e.inputWidth?"width: "+e.inputWidth:"")),type:"digit",disabled:e.disabled||e.disableInput,modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),placeholder:e.placeholder,onInput:P,onFocus:W,onBlur:j},null,8,["style","disabled","modelValue","placeholder"]),N(n,{class:"wd-input-number__input-border"})])),_:1})),N(n,{class:x("wd-input-number__action "+(i.value||e.disablePlus?"is-disabled":"")),onClick:k},{default:_((()=>[N(s,{name:"add","custom-class":"wd-input-number__action-icon"})])),_:1},8,["class"])])),_:1},8,["class","style"])}}}),[["__scopeId","data-v-18e8edd4"]]);export{S as _};
